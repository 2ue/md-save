# 交互设计文档
## UI/UX 设计与用户流程

**文档版本**：v1.0
**创建日期**：2025-01-25
**设计工具**：ASCII Diagrams
**设计原则**：Simple, Fast, Flexible

---

## 一、设计原则

### 1.1 核心原则

**1. 速度优先（Fast First）**
- 默认操作 < 3 秒完成
- 快捷模式 < 1 秒完成
- 减少不必要的步骤

**2. 渐进式披露（Progressive Disclosure）**
- 基础功能突出显示
- 高级功能折叠隐藏
- 根据用户熟练度调整

**3. 清晰反馈（Clear Feedback）**
- 每个操作都有视觉反馈
- 错误信息明确可操作
- 进度显示实时更新

**4. 一致性（Consistency）**
- 图标和颜色统一
- 交互模式统一
- 术语统一

---

## 二、主要界面设计

### 2.1 Popup（主入口）

**场景**：用户点击工具栏图标

**ASCII UI 图**：

```
┌─────────────────────────────────────────┐
│ ⚡ Web Clipper                    [⚙️]  │ ← Header
│ ═════════════════════════════════════════│
│                                         │
│ 📄 当前页面信息                          │ ← Page Info
│ ┌──────────────────────────────────────┐│
│ │ 🌐 Example Article Title             ││
│ │ https://example.com/article          ││
│ │ ────────────────────────────────────││
│ │ 📊 约 1,200 字 • 5 张图片 • 3 分钟   ││
│ └──────────────────────────────────────┘│
│                                         │
│ 🚀 快速操作                              │ ← Quick Actions
│ ┌──────────────────────────────────────┐│
│ │ [📋 复制链接]  [⚡ 快速保存]         ││ ← Big Buttons
│ └──────────────────────────────────────┘│
│                                         │
│ 📝 摘录模式                              │ ← Clip Modes
│ ┌──────────────────────────────────────┐│
│ │ 🖱️  选择区域保存                      ││
│ │     点击选择页面元素                  ││
│ │                                      ││
│ │ 📑  保存整个页面                      ││
│ │     自动提取主要内容                  ││
│ │                                      ││
│ │ ✨  多段选择保存                      ││
│ │     Shift+点击累加选择                ││
│ └──────────────────────────────────────┘│
│                                         │
│ 🕐 最近保存 (3)                          │ ← Recent History
│ ┌──────────────────────────────────────┐│
│ │ • Article 1  #JavaScript  2分钟前    ││
│ │ • Article 2  #Design      1小时前    ││
│ │ • Article 3  #Tutorial    今天       ││
│ │ [查看全部 →]                          ││
│ └──────────────────────────────────────┘│
│                                         │
│         [📚 历史记录] [⚙️ 设置]          │ ← Footer
└─────────────────────────────────────────┘
宽度: 360px | 高度: 自适应
```

**关键元素说明**：

1. **Header**
   - 标题：Web Clipper
   - 设置按钮：右上角齿轮图标

2. **Page Info（信息卡片）**
   - 显示：标题、URL
   - 统计：字数、图片数、阅读时间
   - 样式：卡片式，灰色背景

3. **Quick Actions（快捷操作）**
   - 复制链接：复制 `[Title](URL)` 格式
   - 快速保存：使用默认配置直接保存

4. **Clip Modes（摘录模式）**
   - 三种模式，清晰图标
   - 每个模式有简短说明

5. **Recent History（最近保存）**
   - 显示最近 3 条记录
   - 包含标签和时间
   - 点击查看全部 → 跳转到历史记录页面

---

### 2.2 保存预览 Modal（核心界面）

**场景**：用户选择摘录模式后

**ASCII UI 图（完整模式）**：

```
┌──────────────────────────────────────────────────────────┐
│ Web Clipper - 保存内容                             [✕]   │
│ ══════════════════════════════════════════════════════════│
│                                                          │
│ 📁 文件名                                                │
│ ┌────────────────────────────────────────────────────┐  │
│ │ 2025/01/example-article                         .md│  │
│ │ ⚠️ 完整路径: /notes/2025/01/example-article.md      │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ 🏷️  标签 (可选)                                          │
│ ┌────────────────────────────────────────────────────┐  │
│ │ [#JavaScript] [#WebAPI] [+ 添加标签]               │  │
│ │ 💡 建议: #Web, #Frontend                            │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ 📂 分类                                                  │
│ ┌────────────────────────────────────────────────────┐  │
│ │ [技术文档 ▼]   或 [+ 新建分类]                      │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ 📝 备注 (可选)                                           │
│ ┌────────────────────────────────────────────────────┐  │
│ │ 添加您的想法或笔记...                               │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ ──────────────────────────────────────────────────────  │
│                                                          │
│ 📄 内容预览             [Markdown ▼] [预览 ☐]          │
│ ┌────────────────────────────────────────────────────┐  │
│ │ # Example Article Title                            │  │
│ │                                                    │  │
│ │ > Source: https://example.com                      │  │
│ │                                                    │  │
│ │ ## Introduction                                    │  │
│ │                                                    │  │
│ │ Lorem ipsum dolor sit amet...                      │  │
│ │                                                    │  │
│ │ ![Image](./assets/img_001.jpg)                     │  │
│ │                                                    │  │
│ │ [编辑] ← 点击进入全屏编辑模式                       │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ ⚙️  选项                                                 │
│ [☑ 下载图片 (5 张)]  [☐ 自动添加 frontmatter]          │
│                                                          │
│ ──────────────────────────────────────────────────────  │
│                                                          │
│ 💾 保存位置                                              │
│ ┌────────────────────┐ ┌────────────────────┐          │
│ │ 📁 本地下载         │ │ ☁️  WebDAV         │          │
│ │ 保存到电脑文件夹    │ │ 保存到远端服务器    │          │
│ │                    │ │                    │          │
│ │ [选择]             │ │ [选择]             │          │
│ └────────────────────┘ └────────────────────┘          │
│                                                          │
│            [❌ 取消]           [✅ 保存]                  │
│                                                          │
└──────────────────────────────────────────────────────────┘
宽度: 800px | 高度: 自适应
```

**交互说明**：

1. **文件名输入**
   - 支持目录结构：`2025/01/article`
   - 自动添加 `.md` 后缀
   - 实时显示完整路径预览
   - 错误提示：非法字符、空文件名

2. **标签输入**
   - 输入框，回车添加标签
   - 智能建议（基于页面内容和历史）
   - 点击建议快速添加
   - 已添加标签显示为 chip，可删除

3. **分类选择**
   - 下拉框选择已有分类
   - 或点击"新建分类"
   - 默认分类：无分类、技术文档、博客文章、新闻

4. **内容预览**
   - 默认显示 Markdown 源码
   - 切换到"预览"模式查看渲染效果
   - 点击"编辑"按钮 → 打开全屏编辑器

5. **选项**
   - 下载图片：勾选后后台下载
   - 自动添加 frontmatter：YAML 格式元数据

6. **保存位置**
   - 两个大按钮，清晰区分
   - 点击后展开目录选择器

---

### 2.3 多段选择模式

**场景**：用户点击"多段选择保存"

**ASCII UI 图**：

```
[顶部提示条 - 固定在页面顶部]
┌──────────────────────────────────────────────────────────┐
│ 🎯 多段选择模式                                [ESC 退出] │
│ ──────────────────────────────────────────────────────── │
│ • 点击元素选择 • Shift+点击累加 • 已选择 2 个片段         │
│                                                          │
│ [✅ 完成选择] [🗑️  清除所有] [❌ 取消]                   │
└──────────────────────────────────────────────────────────┘

[页面内容 - 元素高亮]

普通文本...

┌───────────────────────────────────────┐
│ [1] ← 序号标签                         │
│                                       │
│ 这是第一段选中的内容...                 │
│                                       │
└───────────────────────────────────────┘
 ↑ 蓝色边框 (2px solid #3b82f6)
 ↑ 半透明背景 (rgba(59, 130, 246, 0.1))

普通文本...（鼠标悬停时浅灰色高亮）

普通文本...

┌───────────────────────────────────────┐
│ [2] ← 序号标签                         │
│                                       │
│ 这是第二段选中的内容...                 │
│                                       │
└───────────────────────────────────────┘

普通文本...
```

**交互流程**：

```
1. 用户点击"多段选择保存"
   ↓
2. 页面顶部出现提示条
   ↓
3. 鼠标移动到可选元素 → 浅灰色高亮
   ↓
4. 点击元素 → 蓝色边框 + 序号标签 [1]
   ↓
5. Shift+点击另一元素 → 累加选择 [2]
   ↓
6. 点击已选元素 → 取消选择
   ↓
7. 点击"完成选择" → 打开保存预览 Modal
```

---

### 2.4 目录选择器（WebDAV）

**场景**：用户点击"WebDAV"保存方式

**ASCII UI 图**：

```
┌────────────────────────────────────────────┐
│ 选择保存目录                         [✕]   │
│ ════════════════════════════════════════════│
│                                            │
│ 📍 当前路径                                 │
│ ┌──────────────────────────────────────┐  │
│ │ / notes / tech                       │  │
│ │  [^]   [^]                           │  │
│ │  根目录  上一级                        │  │
│ └──────────────────────────────────────┘  │
│                                            │
│ 📁 子目录列表                              │
│ ┌──────────────────────────────────────┐  │
│ │                                      │  │
│ │  📁 2025          [→]                │  │
│ │  📁 javascript     [→]                │  │
│ │  📁 python         [→]                │  │
│ │  📁 web-development [→]               │  │
│ │                                      │  │
│ └──────────────────────────────────────┘  │
│                                            │
│ 💡 预览                                    │
│ 完整路径: /notes/tech/article.md           │
│                                            │
│ [➕ 新建文件夹]  [✅ 确定]  [❌ 取消]        │
│                                            │
└────────────────────────────────────────────┘
```

**交互说明**：

1. **路径导航**
   - 面包屑导航，点击跳转到上级目录
   - 显示当前完整路径

2. **目录列表**
   - 只显示文件夹（不显示文件）
   - 点击文件夹名进入子目录
   - 点击 [→] 按钮也进入子目录

3. **新建文件夹**
   - 点击按钮弹出输入框
   - 输入文件夹名，回车创建
   - 立即刷新列表

4. **确定按钮**
   - 选择当前目录作为保存位置
   - 返回保存预览 Modal

---

### 2.5 历史记录页面

**场景**：用户点击"查看全部历史"

**ASCII UI 图**：

```
┌──────────────────────────────────────────────────────────────────────┐
│ 🕐 保存历史                                    [🔄 同步] [⚙️ 设置]   │
│ ══════════════════════════════════════════════════════════════════════│
│                                                                      │
│ 📊 统计                                                              │
│ ┌────────────┬────────────┬────────────┬────────────┐              │
│ │ 总计: 145  │ 本地: 98   │ WebDAV: 47 │ 本月: 23   │              │
│ └────────────┴────────────┴────────────┴────────────┘              │
│                                                                      │
│ 🔍 搜索和筛选                                                         │
│ ┌──────────────────────────────────────────────────────────────┐    │
│ │ [🔍 搜索标题/URL/标签...]                                      │    │
│ │                                                              │    │
│ │ 分类: [全部 ▼]  位置: [全部 ▼]  日期: [全部 ▼]             │    │
│ │                                                              │    │
│ │ 标签: [#JavaScript] [#Design] [#Tutorial] [清除筛选]        │    │
│ └──────────────────────────────────────────────────────────────┘    │
│                                                                      │
│ 📋 记录列表                    [☐ 全选] [🗑️  删除选中 (3)]         │
│ ┌────────────────────────────────────────────────────────────────┐  │
│ │                                                                │  │
│ │ [☑]  📄 Example Article Title                                 │  │
│ │      https://example.com/article                              │  │
│ │      [#JavaScript] [#WebAPI]  技术文档                        │  │
│ │      💾 WebDAV: /notes/tech/article.md                        │  │
│ │      🕐 2025-01-25 14:30  📊 1.2KB  🖼️  3 张图片              │  │
│ │                                                   [🗑️  删除]   │  │
│ │ ────────────────────────────────────────────────────────────  │  │
│ │                                                                │  │
│ │ [☑]  📄 Another Article                                       │  │
│ │      ...                                                      │  │
│ │                                                                │  │
│ │ [☐]  📄 Third Article                                         │  │
│ │      ...                                                      │  │
│ │                                                                │  │
│ └────────────────────────────────────────────────────────────────┘  │
│                                                                      │
│ ⬅️ 上一页  1 / 5  下一页 ➡️                                           │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
```

**交互说明**：

1. **统计卡片**
   - 总计、本地、WebDAV、本月统计
   - 点击可快速筛选

2. **搜索和筛选**
   - 搜索框：实时搜索
   - 下拉框：分类、位置、日期
   - 标签筛选：点击标签快速筛选
   - 清除筛选：一键重置

3. **记录列表**
   - 卡片式展示
   - 复选框：批量操作
   - 每条记录显示：
     * 标题和 URL（可点击）
     * 标签和分类
     * 保存位置（完整路径）
     * 时间、大小、图片数
   - 单独删除按钮

4. **批量操作**
   - 全选/取消全选
   - 删除选中（显示数量）
   - 导出选中（未来）

---

### 2.6 设置页面

**场景**：用户点击设置图标

**ASCII UI 图**：

```
┌──────────────────────────────────────────────────────────┐
│ ⚙️  设置                                          [✕]    │
│ ══════════════════════════════════════════════════════════│
│                                                          │
│ [基础设置] [WebDAV] [模板] [同步] [高级]  ← Tabs       │
│                                                          │
│ ── 基础设置 Tab ──                                       │
│                                                          │
│ 📁 保存配置                                              │
│ ┌────────────────────────────────────────────────────┐  │
│ │ 本地保存                                           │  │
│ │ ☑ 使用浏览器下载对话框（推荐）                     │  │
│ │ ☐ 默认保存到: [选择文件夹]                         │  │
│ │                                                    │  │
│ │ 文件名模板                                         │  │
│ │ [{{YYYY}}/{{MM}}/{{title}}              ]         │  │
│ │ 💡 支持变量: {{title}}, {{date}}, {{domain}}       │  │
│ │                                                    │  │
│ │ 内容模板                                           │  │
│ │ [选择模板 ▼]  [编辑]  [新建]                      │  │
│ │                                                    │  │
│ │ 图片下载                                           │  │
│ │ ☑ 启用图片下载                                     │  │
│ │ ☑ 自动下载（后台静默）                             │  │
│ │ ☐ 仅下载小于 5MB 的图片                            │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ 🏷️  元数据                                               │
│ ┌────────────────────────────────────────────────────┐  │
│ │ 预设标签（一行一个）                               │  │
│ │ [JavaScript                        ]               │  │
│ │ [Web API                           ]               │  │
│ │ [Tutorial                          ]               │  │
│ │                                                    │  │
│ │ 预设分类                                           │  │
│ │ [技术文档, 博客文章, 新闻, 资料]                   │  │
│ │                                                    │  │
│ │ ☑ 启用标签自动建议                                 │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│ ── WebDAV Tab ──                                        │
│                                                          │
│ ☁️  WebDAV 配置                                          │
│ ┌────────────────────────────────────────────────────┐  │
│ │ 服务器 URL                                         │  │
│ │ [https://webdav.example.com       ] [测试连接]    │  │
│ │                                                    │  │
│ │ 用户名                                             │  │
│ │ [username                         ]               │  │
│ │                                                    │  │
│ │ 密码                                               │  │
│ │ [••••••••                         ]               │  │
│ │                                                    │  │
│ │ 基础路径                                           │  │
│ │ [/notes/                          ]               │  │
│ │                                                    │  │
│ │ 认证方式                                           │  │
│ │ ○ Basic    ● Digest                               │  │
│ └────────────────────────────────────────────────────┘  │
│                                                          │
│            [💾 保存]  [↩️  重置]  [✕ 取消]              │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

---

## 三、用户流程图

### 3.1 快速保存流程（推荐）

```
用户打开网页
    ↓
右键点击 → "快速保存"
    ↓
[后台处理]
 ├─ 提取页面内容
 ├─ 应用默认模板
 ├─ 使用上次保存位置
 └─ 自动生成文件名
    ↓
保存成功
    ↓
Toast 通知: "已保存到 /notes/2025/01/article.md"
```

**时间**：2-3 秒

### 3.2 完整编辑流程

```
用户打开网页
    ↓
点击插件图标
    ↓
选择摘录模式
 ├─ 选择区域: 点击元素
 ├─ 整个页面: 直接提取
 └─ 多段选择: Shift+点击累加
    ↓
打开保存预览 Modal
    ↓
编辑元数据
 ├─ 修改文件名
 ├─ 添加标签
 ├─ 选择分类
 ├─ 编辑内容（可选）
 └─ 勾选选项（下载图片）
    ↓
选择保存位置
 ├─ 本地: 触发浏览器下载对话框
 └─ WebDAV: 选择目录 → 上传
    ↓
保存成功
    ↓
记录到历史
```

**时间**：15-30 秒

### 3.3 历史记录查询流程

```
用户打开历史记录页面
    ↓
输入搜索关键词
    ↓
选择筛选条件
 ├─ 分类
 ├─ 保存位置
 ├─ 日期范围
 └─ 标签
    ↓
查看筛选结果
    ↓
点击记录
 ├─ 标题 → 打开原始网页
 └─ 路径 → 提示用户文件位置
```

---

## 四、交互规范

### 4.1 颜色规范

| 用途 | 颜色 | Hex | 使用场景 |
|------|------|-----|---------|
| 主色（Primary） | 蓝色 | #3b82f6 | 按钮、链接、选中状态 |
| 成功（Success） | 绿色 | #10b981 | 成功提示、完成状态 |
| 警告（Warning） | 黄色 | #f59e0b | 警告信息 |
| 错误（Error） | 红色 | #ef4444 | 错误提示、删除操作 |
| 文本（Text） | 深灰 | #111827 | 主要文本 |
| 次要文本 | 中灰 | #6b7280 | 辅助信息 |
| 边框（Border） | 浅灰 | #d1d5db | 分隔线、输入框边框 |
| 背景（Background） | 极浅灰 | #f9fafb | 卡片背景 |

### 4.2 图标规范

**使用 Lucide Icons**：
- 📋 Clipboard：复制操作
- ⚡ Zap：快速操作
- 🖱️  MousePointer：选择模式
- 📑 FileText：文档/页面
- ✨ Sparkles：特殊功能
- 📁 Folder：文件夹/本地
- ☁️  Cloud：WebDAV/远端
- 🏷️  Tag：标签
- 📂 Folders：分类
- 🕐 Clock：历史/时间
- ⚙️  Settings：设置
- 🔍 Search：搜索
- 🔄 RefreshCw：同步
- ✕ X：关闭/取消
- ✓ Check：确认/完成

### 4.3 动画规范

| 动画类型 | 时长 | 缓动函数 | 使用场景 |
|---------|------|---------|---------|
| 淡入淡出 | 200ms | ease-in-out | Modal 出现/消失 |
| 滑动 | 300ms | ease-out | 侧边栏展开 |
| 缩放 | 150ms | ease-in-out | 按钮点击反馈 |
| 高亮 | 100ms | linear | 元素悬停 |

### 4.4 响应式规范

| 断点 | 宽度 | 适配策略 |
|------|------|---------|
| Popup | 360px 固定 | 不响应式 |
| Modal | 800px → 600px | 缩小内边距 |
| 历史记录 | 全屏 | 响应式表格 |

---

## 五、可访问性（A11y）

### 5.1 键盘导航

| 快捷键 | 功能 |
|--------|------|
| Tab | 焦点移动到下一个元素 |
| Shift+Tab | 焦点移动到上一个元素 |
| Enter | 激活当前焦点元素 |
| Esc | 关闭 Modal/退出选择模式 |
| Ctrl+S | 快速保存 |
| Ctrl+E | 保存并编辑 |

### 5.2 屏幕阅读器支持

- 所有图标都有 `aria-label`
- 所有输入框都有 `<label>`
- Modal 有 `role="dialog"`
- 错误信息有 `role="alert"`

### 5.3 对比度

- 所有文本颜色通过 WCAG AA 标准
- 主色 #3b82f6 在白色背景上对比度 4.5:1

---

## 六、设计决策记录

### 6.1 为什么使用 Modal 而不是 Sidebar？

**决策**：保存预览使用居中 Modal，而不是侧边栏

**理由**：
- ✅ 居中 Modal 更突出（主要操作）
- ✅ 内容预览需要更大空间
- ✅ 不遮挡页面内容（用户可能需要参考）

**代价**：
- ❌ 需要关闭才能查看页面

### 6.2 为什么保存时选择位置，而不是预设默认位置？

**决策**：用户在保存时决定位置

**理由**：
- ✅ 不同内容需要不同位置（灵活性）
- ✅ 用户明确知道文件存到哪里（透明性）
- ✅ 符合"保存对话框"的心智模型

**代价**：
- ❌ 增加操作步骤（从 0 步到 1 步）

**缓解**：
- 提供"快速保存"模式（使用上次位置）
- 记住用户最近使用的目录

### 6.3 为什么不使用 AI 自动生成标签？

**决策**：Phase 1 不集成 AI，Phase 3 再考虑

**理由**：
- ✅ 降低复杂度和成本
- ✅ 避免依赖第三方 API（隐私）
- ✅ 简单的关键词匹配已足够

**代价**：
- ❌ 标签建议不够智能

**未来计划**：
- Phase 2：基于页面关键词的简单建议
- Phase 3：可选的 AI 集成（本地模型或 API）

---

## 附录

### A. 设计资源

- 设计工具：Figma（未来）
- 图标库：Lucide Icons
- 颜色系统：Tailwind CSS Colors
- 字体：系统默认（-apple-system, BlinkMacSystemFont, 'Segoe UI'）

### B. 参考竞品

- Notion Web Clipper：简洁 UI、快速操作
- 印象笔记 Web Clipper：多种模式、右键菜单
- Obsidian Web Clipper：模板系统、本地优先

---

**文档状态**：完成
**最后更新**：2025-01-25
**设计审核**：待审核
